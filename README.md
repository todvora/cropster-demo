# Backend Developer Challenge Part 1

[![Build Status](https://travis-ci.org/todvora/cropster-demo.svg?branch=main)](https://travis-ci.org/todvora/cropster-demo)

## Initial project structure
Generated by [Spring Initializr](https://start.spring.io/)

## Database
For the sake of simplicity and zero-configuration runs, the demo runs on H2 database. It uses JPA/Hibernate
anyway, so there are no database specific queries anyway, it would run the same on mysql or postgresql.

## Version control 
Versioned in git, hosted on github.

## Tests
There are two test classes, the `FacilityManagementTest` is just a usual unit test used during
the development phase. The `RoastingDemo` is described lower.

All tests may be exected using the standard maven command

```
mvn test
```

Tests are also executed automatically on [travis-ci](https://travis-ci.org/github/todvora/cropster-demo).

## Demo - Roast Simulator
The demo / simulator is also implemented as a spring boot test in the `RoastingDemoTest.java` class.  
It's easy to run, present and, maybe more importantly, it contains assertions, to verify that the simulator 
does make sense and generates valid data and database entries. Without assertions, it would be just dummy text output 
without any control over the correctness of the process.

You can run the simulator either from your IDE or by calling `

```
mvn test
```

on the command line (both test classes will run automatically, the unit test and the simulator itself). 

The simulator logs relevant information and contains basic checks like 

* Roasting simulator used all coffee and the weight before roasting start equals sum of all RoastingProcess entries
* The overall weight loss is in 8-15% range as required
* Every roasting took between 5 and 15 minutes

Example output of the simulator run:

```
2021-03-26 08:34:33.807  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: created roasting machine Roasting machine #1 with capacity 40kgs
2021-03-26 08:34:33.820  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: created roasting machine Roasting machine #2 with capacity 71kgs
2021-03-26 08:34:33.835  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: created roasting machine Roasting machine #3 with capacity 70kgs
2021-03-26 08:34:33.838  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: created roasting machine Roasting machine #1 with capacity 36kgs
2021-03-26 08:34:33.841  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: created roasting machine Roasting machine #2 with capacity 53kgs
2021-03-26 08:34:33.851  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: created roasting machine Roasting machine #3 with capacity 39kgs
2021-03-26 08:34:33.865  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: added 2498kgs of 'Boquete SHB - Lerida Estate' to the stock
2021-03-26 08:34:33.868  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: added 5342kgs of 'Samii Uraga Harsu #1' to the stock
2021-03-26 08:34:33.871  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: added 1540kgs of 'Brazil São Lucas, Yellow Bourbon - P10548' to the stock
2021-03-26 08:34:33.878  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: added 9217kgs of 'Elkin Guzman Caturra Honey' to the stock
2021-03-26 08:34:33.883  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: added 4873kgs of 'Certified Organic Kona Prime' to the stock
2021-03-26 08:34:33.891  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: added 6734kgs of 'RESERVA VOLCÁNICA GALERAS 2200 - NARIÑO' to the stock
2021-03-26 08:34:33.897  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: added 6407kgs of '(Single origin) Cundinamarca, Colombia' to the stock
2021-03-26 08:34:33.904  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: added 5981kgs of 'Igarapé - Coffee for the Amazon Rainforest' to the stock
2021-03-26 08:34:33.911  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: added 2077kgs of 'Estate lot - Marie Nakao - Red Catuaí' to the stock
2021-03-26 08:34:33.914  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #2: added 3751kgs of 'Aspinwall Monsoon Malabar AA' to the stock
2021-03-26 08:34:34.023  INFO 3289 --- [           main] c.t.r.services.demo.RoastingDemoTest     : Facility “demo facility #1: there are 23470kgs of green coffee on stock
2021-03-26 08:34:34.079  INFO 3289 --- [           main] c.t.r.services.FacilityManagementImpl    : Roasting started, we are roasting 49 kg of Certified Organic Kona Prime. There are 4824 kg of this coffee remaining on stock
2021-03-26 08:34:34.116  INFO 3289 --- [           main] c.t.r.services.FacilityManagementImpl    : Roasting started, we are roasting 67 kg of Brazil São Lucas, Yellow Bourbon - P10548. There are 1473 kg of this coffee remaining on stock
2021-03-26 08:34:34.132  INFO 3289 --- [           main] c.t.r.services.FacilityManagementImpl    : Roasting started, we are roasting 31 kg of Boquete SHB - Lerida Estate. There are 2467 kg of this coffee remaining on stock
....
```